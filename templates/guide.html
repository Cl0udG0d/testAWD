<!DOCTYPE html>
<html lang="zxx">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>指南</title>
    <!-- Favicon -->
    <!-- <link href="assets/img/favicon.ico" rel="shortcut icon"> -->
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" type="text/css" href="../static/css/bootstrap.min.css">
    <!-- themify icon -->
    <link rel="stylesheet" type="text/css" href="../static/css/themify-icons.css">
    <!-- video popup -->
    <link rel="stylesheet" type="text/css" href="../static/css/colorbox.css">
    <!-- swiper slider -->
    <link rel="stylesheet" type="text/css" href="../static/css/swiper.min.css">
    <!-- Animate Css -->
    <link rel="stylesheet" type="text/css" href="../static/css/animate.css">
    <!-- CSS -->
    <link href="../static/css/style.css" rel="stylesheet">
    <link rel="stylesheet" href="../static/css/guide.css" />
    <link rel="stylesheet" href="../static/css/guide-content.css">
</head>
<style>
    .header_wrap {
        position: fixed;
        background-color: white;
    }
</style>

<body>
    <!-- Pre-loader -->
    <div class="preloader">
        <div class="loader">
        </div>
    </div>

    <!-- Start Header Section -->
    <header class="header_wrap header_wrap_2">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <nav class="mega_nav navbar navbar-expand-md p-0 justify-content-between">
                        <div class="nav_left">
                            <a class="navbar-brand" href=#>GUIDE</a>
                            <button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#mega_menu">
                                <span class="sr-only">Toggle navigation</span>
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                            </button>
                        </div>
                        <div class="p-lg-0 nav_wrapper ml-auto">
                            <ul class="navbar-nav m-auto collapse navbar-collapse" id="mega_menu">
                                <li class="nav-item">
                                    <a class="nav-link" href="index.html">首页</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="time.html">靶机状态</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="rank.html">排名</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="guide.html">指南</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="announcement.html">公告</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="trend.html">得分趋势图</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="data_screen.html">数据大屏</a>
                                </li>
                            </ul>
                        </div>
                        <div class="nav_right d-lg-block d-none" id="login">
                            <a href="#" class="btn">登陆</a>
                        </div>
                    </nav>
                </div>
            </div>
        </div>
    </header>
    <!-- End Header Section -->

    <nav class="menu">
        <ol>
            <li id="content1" class="menu-item active">
                <a href="javascript:void(0);">AWD比赛介绍</a>
            </li>
            <li id="content2" class="menu-item">
                <a href="javascript:void(0);">AWD流程</a>
            </li>
            <li id="content3" class="menu-item">
                <a href="javascript:void(0);">攻击流程</a>
            </li>
            <li id="content4" class="menu-item">
                <a href="javascript:void(0);">防守流程</a>
            </li>
        </ol>
    </nav>

    <div class="container-div" style="background-color: white;">
        <div class="text content1" style="margin-top: 147px;margin-left: 20px;">
            <!--main-->
            <main id="article01">
                <div class="ax-padding">
                    <h2>比赛介绍</h2>
                    AWD(Attack With Defense，攻防兼备)模式是一个非常有意思的模式，你需要在一场比赛里要扮演攻击方和防守方，攻者得分，失守者会被扣分。也就是说，攻击别人的靶机可以获取 Flag 分数时，别人会被扣分，同时你也要保护自己的主机不被别人得分，以防扣分。
                    <img src="../static/image/awd1.png" style="width:100%;">
                    <div class="ax-break"></div>
                    <div class="ax-break"></div>
                </div>
            </main>

        </div>
        <div class="text content2">
            <div class="ax-padding">
                <h2>AWD流程</h2>
                1. 出题方会给每一支队伍部署同样环境的主机，主机有一台或者多台。 2. 拿到机器后每个队伍会有一定的加固时间或没有加固时间，这个视规则而定。 3. 每个服务、数据库、主机上都会可能存在 flag 字段，并且会定时刷新。通过攻击拿到 flag 后需要提交到裁判机进行得分，一般会提供指定的提交接口。下一轮刷新后，如果还存在该漏洞，可以继续利用漏洞获取 flag 进行得分。 通常来说，如果攻防赛时间比较短的话，一般只会考核 Web 、数据库的渗透、已有漏洞的利用；如果时间较长，很可能还需要做内网渗透，由于这块比较深入，这篇文章暂时不讲，因为我自己也不太会。
                一般一个队伍由三人组成。负责两个方面：一方面负责防守加固、做基线、加WAF、流量回放等等。一方面负责源码审计、写攻击脚本、维持权限、持续渗透，具体怎么安排都视三人能力而定。
            </div>
        </div>
        <div class="text content3">
            <div class="ax-padding">
                <h2>攻击流程</h2>
                <div class="ax-break"></div>

                <h3>信息收集</h3>
                第一步，探测主机。用 Nmap 或者 HTTPScan等工具，先扫描主办方给的内网存活主机，弄明白网络拓扑。如果主办方给了主机范围的话就更加省事儿了。 第二步，探测端口。因为主办方给的机器都是一样的，所以直接看自己开了什么端口就行。如果不一样的话，使用 Nmap 进行常见端口扫描，先攻击常见端口，再放后台进行全端口的扫描，发现新端口再加入到攻击队列中。 第三步，探测端口服务。端口服务一般用 Nmap 就能扫到，并且可以用 Nmap 的脚本扫一下漏洞，但是需要注意 Nmap 的相关参数，这要根据情况灵活运用。
                简单的信息收集到此完成，除了 Nmap 外可以使用自己熟悉的工具，比如说 msf 啥的，方便后续渗透。
                <div class="ax-break"></div>

                <h3>端口攻击</h3>
                由于 AWD 需要的就是手快，端口一般也会有弱口令的情况存在，比如常见的 22、3389、1443、3306 等主机登陆、数据库端口。 我打过的一次省赛中，就遇到了这种情况。主办方只给队伍机器的 IP，给定用户名，需要自行爆破进入机器，并修改密码。如果这个时候你的手慢，爆破脚本没准备好，你的机器就会沦入别人之手。当时我们就是手慢了，只能眼睁睁看着别人拿到了我们的机器，一轮轮掉分了……
                <div class="ax-break"></div>
                <div class="ax-break"></div>

                <h3>Web攻击</h3>
                Web 方面的语言多为 PHP，小部分为 Java 和 Python。这里的 Web 环境分两种情况，一种是已有漏洞的框架，一种是出题人写的框架。 如果是已有漏洞的框架，通常会比较明显。比如说 Struts 2 各种漏洞等等，用工具扫就可以扫出来。这个需要准备得比较充分，在电脑中备好 EXP 库、漏洞库和各种扫描工具库，以便能够快速利用比较明显的漏洞。总之手要快！ 如果是出题人出的框架，常用并且简单有效的做法是把整站源码下载下来，直接用工具审计。以 PHP 举例，一般的流程是先D盾查杀，发现有带有预留后门或者
                Webshell 马上报给防守队友进行加固。 把后门的问题搞定、防止别人快速拿分后，其次才是源码审计，发现问题点后迅速验证，报给防守队友，并且开始写攻击脚本。以 PHP 举例，一般是使用 Seay 等源码审计工具，审核出比较明显的漏洞。 完成了工具扫描后，开始常规的渗透测试，比如说文件上传、SQL 注入等等，看是否能绕过，找到一个点马上写利用脚本。
                <div class="ax-break"></div>
                <div class="ax-break"></div>

                <h3>维持权限</h3>
                一顿操作猛如虎，拿到 Webshell ，之后干啥呢？ 当然是要维持权限啦！简单的 Webshell 一眼就看出来了好伐，在 AWD 中优先考虑种不死马、反弹 shell，用一般木马的留后门方式维持权限，以便后续刷 flag，再考虑提升权限。有的同学不知道啥叫“不死马”，解释一下，“不死马”的主要功能是执行后会不断在该路径生成一个 shell 文件，用于菜刀等工具进行连接，是一种维持权限的方法。 > 小 Trick: 使用 `find / -name *flag*` 或 `grep -rn "flag"
                *` 类似的语句可以快速发现 flag 所在的地方，方便后续拿分。
                <div class="ax-break"></div>
                <div class="ax-break"></div>
            </div>
        </div>
        <div class="text content4" style="margin-top: 146px;">
            <div class="ax-padding">
                <h2>防守流程</h2>
                防守队友做的事情简单来说，按优先级有以下几个： 1. 重中之重：备份网站源码和数据库。这个作用有二，一是以防自己魔改网站源码或数据库后无法恢复，二是裁判一般会定时 Check 服务是否正常，如果不正常会进行扣分，因此备份也可以防对手入侵主机删源码后快速恢复服务。 2. 系统安全性检查。就是不该开的端口 3306 有没有开启、有没有限制 SSH 登陆、SSH密码 修改、MySQL 是否为默认密码等等，这里可以用脚本刷一遍。 3. 部署 WAF。用自己提前准备好的 WAF，使用脚本进行快速部署，但是要注意验证会不会部署完后服务不可用。
                4. 修改权限。比如说 MySQL 用户读表权限，上传目录是否可执行的权限等等。 5. 部署文件监控脚本。监控可读写权限的目录是否新增、删除文件并及时提醒。这里说下，如果被种了不死马的话通常有以下几种克制方法。     - 强行 kill 掉进程后重启服务     - 建立一个和不死马相同名字的文件或者目录     - 写脚本不断删除文件     - 不断写入一个和不死马同名的文件 6. 部署流量监控脚本或开启服务器日志记录。目的主要是为了进行流量回放，看其它大佬如何用我们没发现的漏洞来打我们的机子，抓取到之后把看不懂的流量直接回放到别的机子去，这里还得提到，我们自己在攻击的时候，也要试着混淆一下自己的攻击流量，不能轻易被别人利用。
                <div class="ax-break"></div>
                <div class="ax-break"></div>
            </div>
        </div>
    </div>

    <div class="footer_bottom d-flex justify-content-center align-items-center">
        <div class="row ">
            <div class="col-md-12">
                <div class="copy_right_text">
                    <p>&copy; 2012 <i class="ti-heart"></i> FD Company All rights reserved.</p>
                </div>
            </div>
        </div>
    </div>

    <!--jQuery JS-->
    <script src="../static/js/jquery-3.3.1.min.js"></script>
    <script src="../static/js/popper.min.js"></script>
    <!-- Bootstrap -->
    <script src="../static/js/bootstrap.min.js"></script>
    <!-- Colorbox video poput -->
    <script src="../static/js/jquery.colorbox-min.js"></script>
    <!-- Swiper Slider -->
    <script src="../static/js/swiper.min.js"></script>
    <!-- waypoints  -->
    <script src="../static/js/jquery.waypoints.min.js"></script>
    <!-- Counterup  -->
    <script src="../static/js/jquery.counterup.min.js"></script>
    <!-- Custom js -->
    <script src="../static/js/main.js"></script>
    <script src="../static/js/guide.js"></script>
    <script>
        var login = document.querySelector('#login');
        login.onclick = function() {
            window.location = 'login.html';
        }
    </script>
</body>

</html>